<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/dev-prod-2/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/dev-prod-2/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/dev-prod-2/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/dev-prod-2/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/dev-prod-2/images/favicon.ico"/><title>Reinvent the wheel – Developer Productivity 2</title><meta name="description" content="its one of the best past times"/><meta name="keywords" content="ThePrimeagen,Live Coding,TypeScript,JavaScript,Git,Github,Algorithms,DataStructures,Data Structures,TS"/><meta name="og:description" content="its one of the best past times"/><meta name="og:title" content="Reinvent the wheel – Developer Productivity 2"/><meta name="og:image" content="/dev-prod-2/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/dev-prod-2/_next/static/css/77aba6635732f01b.css" as="style"/><link rel="stylesheet" href="/dev-prod-2/_next/static/css/77aba6635732f01b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/dev-prod-2/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/dev-prod-2/_next/static/chunks/webpack-8dbb88a6459cf950.js" defer=""></script><script src="/dev-prod-2/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/dev-prod-2/_next/static/chunks/main-27b76dd530f8f7ed.js" defer=""></script><script src="/dev-prod-2/_next/static/chunks/pages/_app-e295491404fe296d.js" defer=""></script><script src="/dev-prod-2/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-7e79801f4e913ad6.js" defer=""></script><script src="/dev-prod-2/_next/static/9mr2VSKi99OqOhejAzbQC/_buildManifest.js" defer=""></script><script src="/dev-prod-2/_next/static/9mr2VSKi99OqOhejAzbQC/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/dev-prod-2">Developer Productivity 2</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/workshops/developer-productivity-v2/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><h2>Reinvent the wheel</h2>
<p>I love reinventing the wheel.  There are many reasons why i like doing it too!</p>
<br>
<br>

<h3>You will gain</h3>
<ul>
<li>a new appreciation of what it takes to create software</li>
<li>learn a bunch about the topic along the way</li>
<li>become a better engineer yourself, meaning you will now be able to guage
problems more accurately</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>My Current Bash Setup</h2>
<p>This is obviously subject to change.  About once a year to every two years I
try to rethink through everything I have done and see if its something i like
or hate.  That way I can continue to improve my system but I don&#39;t end up
becoming a meme of the continually pursuit of perfection.</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Lets set some goals</h2>
<ul>
<li>I want to be able to bootstrap any machine i will purchase in the future that
is ubuntu based.<ul>
<li>i am not going to be clever and try to do a multiOS style, though this
isn&#39;t hard its just tedious</li>
<li>if i need a mac install script i am sure i can create a mac version</li>
</ul>
</li>
<li>I want to be able to install all my favorite libraries</li>
<li>I want the repos that i actively maintained brought down</li>
<li>I want to be able to build neovim from source</li>
<li>I want all the tools i use available</li>
<li>I want to copy all my dotfiles over to my env.  i like them separated.</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>I just want it all</h2>
<p>I really just want to automate my system with the greatest automation language
of all time...</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<p>bash</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Rolling out own</h2>
<p>There are other versions of this exact same project that is someone elses
version.  I want to emphasize that I think the more you own of your system the
better it will be because its exactly the way you want it.  You have the power
to fashion it the way you want!</p>
<br>
<br>

<p>But i am not foolish, this is also a double edge sword where you have to
maintain and improve your own system to make continue to make it great.</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>The idea</h2>
<p>Create a script called <code>run</code> that will, based on some arguments passed in,
will run 0 or more scripts.  I want to make sure that scripts are easily
organized so the scripts will be located in a subdirectory called <code>runs</code></p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>My version</h2>
<p>If you want to check out my final version of this product, check out my repo
named <a href="https://github.com/theprimeagen/dev">dev</a></p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Argument parsing and script setup</h2>
<p>Now we need to write the ackshual run script.  Lets start with first creating
the dev environment.  Meaning getting the libraries, projects, editor, etc etc
that we want on our machine.</p>
<p><em>Perhaps a bit of white boarding could be useful here...</em></p>
<ul>
<li>create a project directory anywhere you deem fit</li>
<li>create a script called <code>run</code> within the directory you just created and make it executable (chmod +x run) within</li>
<li>open up your favorite text editor neovim (maybe something else...)</li>
</ul>
<br>
<br>

<h3>Start simple</h3>
<ul>
<li>code up something that allows us to know the current directory and take in 1
argument for filtering of tasks</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Expected Code</h2>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

script_dir=<span class="hljs-string">&quot;<span class="hljs-subst">$( cd <span class="hljs-string">&quot;<span class="hljs-subst">$( dirname <span class="hljs-string">&quot;<span class="hljs-variable">${BASH_SOURCE[0]}</span>&quot;</span> )</span>&quot;</span> &amp;&gt; /dev/null &amp;&amp; pwd )</span>&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$script_dir</span>&quot;</span>

filter=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Run: dir <span class="hljs-variable">$script_dir</span> -- filter \&quot;<span class="hljs-variable">$filter</span>\&quot;&quot;</span>
</code></pre><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>But how do we run scripts?</h2>
<ul>
<li><p>we need to use our current script location to figure out all the available
scripts and run them one by one and if we have a mask/filter/grep then use
that to prevent any extra execution</p>
</li>
<li><p>coding time...</p>
</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Expected Code</h2>
<pre><code class="hljs language-bash"><span class="hljs-comment"># ... previous section ...</span>
script_dir=<span class="hljs-string">&quot;<span class="hljs-subst">$(cd $(dirname <span class="hljs-string">&quot;<span class="hljs-variable">${BASH_SOURCE[0]}</span>&quot;</span>)</span> &amp;&amp; pwd)&quot;</span>
filter=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>

<span class="hljs-built_in">cd</span> <span class="hljs-variable">$script_dir</span>
scripts=$(find runs -maxdepth 1 -mindepth 1 -executable -<span class="hljs-built_in">type</span> f)

<span class="hljs-keyword">for</span> script <span class="hljs-keyword">in</span> <span class="hljs-variable">$scripts</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$script</span>&quot;</span> | grep -qv <span class="hljs-string">&quot;<span class="hljs-variable">$filter</span>&quot;</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;filtered: <span class="hljs-variable">$filter</span> -- <span class="hljs-variable">$script</span>&quot;</span>
        <span class="hljs-built_in">continue</span>
    <span class="hljs-keyword">fi</span>
    ./<span class="hljs-variable">$script</span>
<span class="hljs-keyword">done</span>
</code></pre><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Quick Note</h2>
<p>why single bracket comparison ?</p>
<pre><code class="hljs language-bash"><span class="hljs-keyword">if</span> [ ! -z <span class="hljs-string">&quot;<span class="hljs-variable">$myvar</span>&quot;</span> ]; <span class="hljs-keyword">then</span> ...
</code></pre><p>why double bracket comparison ?</p>
<pre><code class="hljs language-bash"><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$myvar</span> == <span class="hljs-string">&quot;&quot;</span> ]]; <span class="hljs-keyword">then</span> ...
</code></pre><p>why no bracket comparison ?</p>
<pre><code class="hljs language-bash"><span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$myvar</span> | grep -q <span class="hljs-string">&quot;hello world&quot;</span>; <span class="hljs-keyword">then</span> ...
</code></pre><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Back to the program</h2>
<p>We officially have our files being ran and we have filtering, and this is great.</p>
<p>But what if we need to debug this bash script?  We don&#39;t really have a way
other than add a bunch of print statements and potentially run some side
effects we were not expecting</p>
<p>We need a <code>dry_run</code>, so lets write it now!</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Expected Code</h2>
<p>Here is the full code up to this point</p>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

script_dir=<span class="hljs-string">&quot;<span class="hljs-subst">$(cd $(dirname <span class="hljs-string">&quot;<span class="hljs-variable">${BASH_SOURCE[0]}</span>&quot;</span>)</span> &amp;&amp; pwd)&quot;</span>
filter=<span class="hljs-string">&quot;&quot;</span>
dry=<span class="hljs-string">&quot;0&quot;</span>

<span class="hljs-built_in">cd</span> <span class="hljs-variable">$script_dir</span>
scripts=$(find runs -maxdepth 1 -mindepth 1 -executable -<span class="hljs-built_in">type</span> f)

<span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$#</span> &gt; 0 ]]; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> == <span class="hljs-string">&quot;--dry&quot;</span> ]]; <span class="hljs-keyword">then</span>
        dry=<span class="hljs-string">&quot;1&quot;</span>
    <span class="hljs-keyword">else</span>
        filter=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>
    <span class="hljs-keyword">fi</span>
    <span class="hljs-built_in">shift</span>
<span class="hljs-keyword">done</span>

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$dry</span> == <span class="hljs-string">&quot;1&quot;</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;[DRY_RUN]: <span class="hljs-variable">$@</span>&quot;</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-function"><span class="hljs-title">execute</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">&quot;execute: <span class="hljs-variable">$@</span>&quot;</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$dry</span> == <span class="hljs-string">&quot;1&quot;</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">return</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>
}

<span class="hljs-built_in">log</span> <span class="hljs-string">&quot;run: filter=<span class="hljs-variable">$filter</span>&quot;</span>

<span class="hljs-keyword">for</span> script <span class="hljs-keyword">in</span> <span class="hljs-variable">$scripts</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$script</span>&quot;</span> | grep -qv <span class="hljs-string">&quot;<span class="hljs-variable">$filter</span>&quot;</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">&quot;filtered: <span class="hljs-variable">$filter</span> -- <span class="hljs-variable">$script</span>&quot;</span>
        <span class="hljs-built_in">continue</span>
    <span class="hljs-keyword">fi</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">&quot;running script: <span class="hljs-variable">$script</span>&quot;</span>
    execute ./<span class="hljs-variable">$script</span>
<span class="hljs-keyword">done</span>
</code></pre><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Boom!</h2>
<p>We now have a script that is easily extensible for setting up our environment</p>
<ul>
<li>You can add as many scripts as you would like</li>
<li>You can filter which scripts get ran</li>
<li>You can easily edit those scripts to be exactly what you want</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Some cons</h2>
<ul>
<li>Bash sort of sucks..</li>
<li>Keeping things up date is easy to forget<ul>
<li>this is also why i always copy my environment.  i never edit the env files
directly.  A good habit for me</li>
</ul>
</li>
<li>Making it OS independent is a bit of a pain in the ass<ul>
<li>i would argue its easier and up to as hard as ansible</li>
</ul>
</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h2>Other thoughts on dry runs</h2>
<p>You <code>export DRY_RUN</code> during the dry run checks and then run every script and
let your scripts be the ones that tell you what it would be doing instead of
doing it.</p>
<p>I just find that amount of logic is nice on paper but a huge pain in practice</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

</div><div class="lesson-links"><a href="/dev-prod-2/lessons/your-env/ansible" class="prev">← Previous</a><a href="/dev-prod-2/lessons/your-env/neovim" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/theprimeagen"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"Reinvent the wheel","description":"its one of the best past times"},"html":"\u003ch2\u003eReinvent the wheel\u003c/h2\u003e\n\u003cp\u003eI love reinventing the wheel.  There are many reasons why i like doing it too!\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch3\u003eYou will gain\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ea new appreciation of what it takes to create software\u003c/li\u003e\n\u003cli\u003elearn a bunch about the topic along the way\u003c/li\u003e\n\u003cli\u003ebecome a better engineer yourself, meaning you will now be able to guage\nproblems more accurately\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eMy Current Bash Setup\u003c/h2\u003e\n\u003cp\u003eThis is obviously subject to change.  About once a year to every two years I\ntry to rethink through everything I have done and see if its something i like\nor hate.  That way I can continue to improve my system but I don\u0026#39;t end up\nbecoming a meme of the continually pursuit of perfection.\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eLets set some goals\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eI want to be able to bootstrap any machine i will purchase in the future that\nis ubuntu based.\u003cul\u003e\n\u003cli\u003ei am not going to be clever and try to do a multiOS style, though this\nisn\u0026#39;t hard its just tedious\u003c/li\u003e\n\u003cli\u003eif i need a mac install script i am sure i can create a mac version\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eI want to be able to install all my favorite libraries\u003c/li\u003e\n\u003cli\u003eI want the repos that i actively maintained brought down\u003c/li\u003e\n\u003cli\u003eI want to be able to build neovim from source\u003c/li\u003e\n\u003cli\u003eI want all the tools i use available\u003c/li\u003e\n\u003cli\u003eI want to copy all my dotfiles over to my env.  i like them separated.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eI just want it all\u003c/h2\u003e\n\u003cp\u003eI really just want to automate my system with the greatest automation language\nof all time...\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003cp\u003ebash\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eRolling out own\u003c/h2\u003e\n\u003cp\u003eThere are other versions of this exact same project that is someone elses\nversion.  I want to emphasize that I think the more you own of your system the\nbetter it will be because its exactly the way you want it.  You have the power\nto fashion it the way you want!\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003cp\u003eBut i am not foolish, this is also a double edge sword where you have to\nmaintain and improve your own system to make continue to make it great.\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eThe idea\u003c/h2\u003e\n\u003cp\u003eCreate a script called \u003ccode\u003erun\u003c/code\u003e that will, based on some arguments passed in,\nwill run 0 or more scripts.  I want to make sure that scripts are easily\norganized so the scripts will be located in a subdirectory called \u003ccode\u003eruns\u003c/code\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eMy version\u003c/h2\u003e\n\u003cp\u003eIf you want to check out my final version of this product, check out my repo\nnamed \u003ca href=\"https://github.com/theprimeagen/dev\"\u003edev\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eArgument parsing and script setup\u003c/h2\u003e\n\u003cp\u003eNow we need to write the ackshual run script.  Lets start with first creating\nthe dev environment.  Meaning getting the libraries, projects, editor, etc etc\nthat we want on our machine.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003ePerhaps a bit of white boarding could be useful here...\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ecreate a project directory anywhere you deem fit\u003c/li\u003e\n\u003cli\u003ecreate a script called \u003ccode\u003erun\u003c/code\u003e within the directory you just created and make it executable (chmod +x run) within\u003c/li\u003e\n\u003cli\u003eopen up your favorite text editor neovim (maybe something else...)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch3\u003eStart simple\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ecode up something that allows us to know the current directory and take in 1\nargument for filtering of tasks\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eExpected Code\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-meta\"\u003e#!/usr/bin/env bash\u003c/span\u003e\n\nscript_dir=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-subst\"\u003e$( cd \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-subst\"\u003e$( dirname \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e${BASH_SOURCE[0]}\u003c/span\u003e\u0026quot;\u003c/span\u003e )\u003c/span\u003e\u0026quot;\u003c/span\u003e \u0026amp;\u0026gt; /dev/null \u0026amp;\u0026amp; pwd )\u003c/span\u003e\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$script_dir\u003c/span\u003e\u0026quot;\u003c/span\u003e\n\nfilter=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$1\u003c/span\u003e\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Run: dir \u003cspan class=\"hljs-variable\"\u003e$script_dir\u003c/span\u003e -- filter \\\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$filter\u003c/span\u003e\\\u0026quot;\u0026quot;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eBut how do we run scripts?\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003ewe need to use our current script location to figure out all the available\nscripts and run them one by one and if we have a mask/filter/grep then use\nthat to prevent any extra execution\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ecoding time...\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eExpected Code\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ... previous section ...\u003c/span\u003e\nscript_dir=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-subst\"\u003e$(cd $(dirname \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e${BASH_SOURCE[0]}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\u003c/span\u003e \u0026amp;\u0026amp; pwd)\u0026quot;\u003c/span\u003e\nfilter=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$1\u003c/span\u003e\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$script_dir\u003c/span\u003e\nscripts=$(find runs -maxdepth 1 -mindepth 1 -executable -\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e f)\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e script \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$scripts\u003c/span\u003e; \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\u0026quot;\u003c/span\u003e | grep -qv \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$filter\u003c/span\u003e\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;filtered: \u003cspan class=\"hljs-variable\"\u003e$filter\u003c/span\u003e -- \u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003econtinue\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efi\u003c/span\u003e\n    ./\u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eQuick Note\u003c/h2\u003e\n\u003cp\u003ewhy single bracket comparison ?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [ ! -z \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$myvar\u003c/span\u003e\u0026quot;\u003c/span\u003e ]; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e ...\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ewhy double bracket comparison ?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"hljs-variable\"\u003e$myvar\u003c/span\u003e == \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e ]]; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e ...\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ewhy no bracket comparison ?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$myvar\u003c/span\u003e | grep -q \u003cspan class=\"hljs-string\"\u003e\u0026quot;hello world\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e ...\n\u003c/code\u003e\u003c/pre\u003e\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eBack to the program\u003c/h2\u003e\n\u003cp\u003eWe officially have our files being ran and we have filtering, and this is great.\u003c/p\u003e\n\u003cp\u003eBut what if we need to debug this bash script?  We don\u0026#39;t really have a way\nother than add a bunch of print statements and potentially run some side\neffects we were not expecting\u003c/p\u003e\n\u003cp\u003eWe need a \u003ccode\u003edry_run\u003c/code\u003e, so lets write it now!\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eExpected Code\u003c/h2\u003e\n\u003cp\u003eHere is the full code up to this point\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-meta\"\u003e#!/usr/bin/env bash\u003c/span\u003e\n\nscript_dir=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-subst\"\u003e$(cd $(dirname \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e${BASH_SOURCE[0]}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\u003c/span\u003e \u0026amp;\u0026amp; pwd)\u0026quot;\u003c/span\u003e\nfilter=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e\ndry=\u003cspan class=\"hljs-string\"\u003e\u0026quot;0\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$script_dir\u003c/span\u003e\nscripts=$(find runs -maxdepth 1 -mindepth 1 -executable -\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e f)\n\n\u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e [[ \u003cspan class=\"hljs-variable\"\u003e$#\u003c/span\u003e \u0026gt; 0 ]]; \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$1\u003c/span\u003e\u0026quot;\u003c/span\u003e == \u003cspan class=\"hljs-string\"\u003e\u0026quot;--dry\u0026quot;\u003c/span\u003e ]]; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e\n        dry=\u003cspan class=\"hljs-string\"\u003e\u0026quot;1\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n        filter=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$1\u003c/span\u003e\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efi\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003eshift\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003elog\u003c/span\u003e\u003c/span\u003e() {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"hljs-variable\"\u003e$dry\u003c/span\u003e == \u003cspan class=\"hljs-string\"\u003e\u0026quot;1\u0026quot;\u003c/span\u003e ]]; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;[DRY_RUN]: \u003cspan class=\"hljs-variable\"\u003e$@\u003c/span\u003e\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$@\u003c/span\u003e\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efi\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eexecute\u003c/span\u003e\u003c/span\u003e() {\n    \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;execute: \u003cspan class=\"hljs-variable\"\u003e$@\u003c/span\u003e\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"hljs-variable\"\u003e$dry\u003c/span\u003e == \u003cspan class=\"hljs-string\"\u003e\u0026quot;1\u0026quot;\u003c/span\u003e ]]; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003ereturn\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efi\u003c/span\u003e\n\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$@\u003c/span\u003e\u0026quot;\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;run: filter=\u003cspan class=\"hljs-variable\"\u003e$filter\u003c/span\u003e\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e script \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$scripts\u003c/span\u003e; \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\u0026quot;\u003c/span\u003e | grep -qv \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$filter\u003c/span\u003e\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;filtered: \u003cspan class=\"hljs-variable\"\u003e$filter\u003c/span\u003e -- \u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003econtinue\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efi\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;running script: \u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\u0026quot;\u003c/span\u003e\n    execute ./\u003cspan class=\"hljs-variable\"\u003e$script\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eBoom!\u003c/h2\u003e\n\u003cp\u003eWe now have a script that is easily extensible for setting up our environment\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eYou can add as many scripts as you would like\u003c/li\u003e\n\u003cli\u003eYou can filter which scripts get ran\u003c/li\u003e\n\u003cli\u003eYou can easily edit those scripts to be exactly what you want\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eSome cons\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBash sort of sucks..\u003c/li\u003e\n\u003cli\u003eKeeping things up date is easy to forget\u003cul\u003e\n\u003cli\u003ethis is also why i always copy my environment.  i never edit the env files\ndirectly.  A good habit for me\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMaking it OS independent is a bit of a pain in the ass\u003cul\u003e\n\u003cli\u003ei would argue its easier and up to as hard as ansible\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003ch2\u003eOther thoughts on dry runs\u003c/h2\u003e\n\u003cp\u003eYou \u003ccode\u003eexport DRY_RUN\u003c/code\u003e during the dry run checks and then run every script and\nlet your scripts be the ones that tell you what it would be doing instead of\ndoing it.\u003c/p\u003e\n\u003cp\u003eI just find that amount of logic is nice on paper but a huge pain in practice\u003c/p\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n","markdown":"\n## Reinvent the wheel\nI love reinventing the wheel.  There are many reasons why i like doing it too!\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n### You will gain\n* a new appreciation of what it takes to create software\n* learn a bunch about the topic along the way\n* become a better engineer yourself, meaning you will now be able to guage\n  problems more accurately\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## My Current Bash Setup\nThis is obviously subject to change.  About once a year to every two years I\ntry to rethink through everything I have done and see if its something i like\nor hate.  That way I can continue to improve my system but I don't end up\nbecoming a meme of the continually pursuit of perfection.\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Lets set some goals\n* I want to be able to bootstrap any machine i will purchase in the future that\n  is ubuntu based.\n  * i am not going to be clever and try to do a multiOS style, though this\n    isn't hard its just tedious\n  * if i need a mac install script i am sure i can create a mac version\n* I want to be able to install all my favorite libraries\n* I want the repos that i actively maintained brought down\n* I want to be able to build neovim from source\n* I want all the tools i use available\n* I want to copy all my dotfiles over to my env.  i like them separated.\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## I just want it all\nI really just want to automate my system with the greatest automation language\nof all time...\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\nbash\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Rolling out own\nThere are other versions of this exact same project that is someone elses\nversion.  I want to emphasize that I think the more you own of your system the\nbetter it will be because its exactly the way you want it.  You have the power\nto fashion it the way you want!\n\n\u003cbr\u003e\n\u003cbr\u003e\n\nBut i am not foolish, this is also a double edge sword where you have to\nmaintain and improve your own system to make continue to make it great.\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## The idea\nCreate a script called `run` that will, based on some arguments passed in,\nwill run 0 or more scripts.  I want to make sure that scripts are easily\norganized so the scripts will be located in a subdirectory called `runs`\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## My version\nIf you want to check out my final version of this product, check out my repo\nnamed [dev](https://github.com/theprimeagen/dev)\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Argument parsing and script setup\nNow we need to write the ackshual run script.  Lets start with first creating\nthe dev environment.  Meaning getting the libraries, projects, editor, etc etc\nthat we want on our machine.\n\n*Perhaps a bit of white boarding could be useful here...*\n\n* create a project directory anywhere you deem fit\n* create a script called `run` within the directory you just created and make it executable (chmod +x run) within\n* open up your favorite text editor neovim (maybe something else...)\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n### Start simple\n* code up something that allows us to know the current directory and take in 1\nargument for filtering of tasks\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Expected Code\n```bash\n#!/usr/bin/env bash\n\nscript_dir=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" \u0026\u003e /dev/null \u0026\u0026 pwd )\"\necho \"$script_dir\"\n\nfilter=\"$1\"\n\necho \"Run: dir $script_dir -- filter \\\"$filter\\\"\"\n```\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## But how do we run scripts?\n* we need to use our current script location to figure out all the available\n  scripts and run them one by one and if we have a mask/filter/grep then use\n  that to prevent any extra execution\n\n* coding time...\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Expected Code\n\n```bash\n# ... previous section ...\nscript_dir=\"$(cd $(dirname \"${BASH_SOURCE[0]}\") \u0026\u0026 pwd)\"\nfilter=\"$1\"\n\ncd $script_dir\nscripts=$(find runs -maxdepth 1 -mindepth 1 -executable -type f)\n\nfor script in $scripts; do\n    if echo \"$script\" | grep -qv \"$filter\"; then\n        echo \"filtered: $filter -- $script\"\n        continue\n    fi\n    ./$script\ndone\n```\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Quick Note\nwhy single bracket comparison ?\n\n```bash\nif [ ! -z \"$myvar\" ]; then ...\n```\nwhy double bracket comparison ?\n\n```bash\nif [[ $myvar == \"\" ]]; then ...\n```\n\nwhy no bracket comparison ?\n\n```bash\nif echo $myvar | grep -q \"hello world\"; then ...\n```\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Back to the program\nWe officially have our files being ran and we have filtering, and this is great.\n\nBut what if we need to debug this bash script?  We don't really have a way\nother than add a bunch of print statements and potentially run some side\neffects we were not expecting\n\nWe need a `dry_run`, so lets write it now!\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Expected Code\nHere is the full code up to this point\n\n```bash\n#!/usr/bin/env bash\n\nscript_dir=\"$(cd $(dirname \"${BASH_SOURCE[0]}\") \u0026\u0026 pwd)\"\nfilter=\"\"\ndry=\"0\"\n\ncd $script_dir\nscripts=$(find runs -maxdepth 1 -mindepth 1 -executable -type f)\n\nwhile [[ $# \u003e 0 ]]; do\n    if [[ \"$1\" == \"--dry\" ]]; then\n        dry=\"1\"\n    else\n        filter=\"$1\"\n    fi\n    shift\ndone\n\nlog() {\n    if [[ $dry == \"1\" ]]; then\n        echo \"[DRY_RUN]: $@\"\n    else\n        echo \"$@\"\n    fi\n}\n\nexecute() {\n    log \"execute: $@\"\n    if [[ $dry == \"1\" ]]; then\n        return\n    fi\n\n    \"$@\"\n}\n\nlog \"run: filter=$filter\"\n\nfor script in $scripts; do\n    if echo \"$script\" | grep -qv \"$filter\"; then\n        log \"filtered: $filter -- $script\"\n        continue\n    fi\n    log \"running script: $script\"\n    execute ./$script\ndone\n```\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Boom!\nWe now have a script that is easily extensible for setting up our environment\n\n* You can add as many scripts as you would like\n* You can filter which scripts get ran\n* You can easily edit those scripts to be exactly what you want\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Some cons\n* Bash sort of sucks..\n* Keeping things up date is easy to forget\n  * this is also why i always copy my environment.  i never edit the env files\n  directly.  A good habit for me\n* Making it OS independent is a bit of a pain in the ass\n  * i would argue its easier and up to as hard as ansible\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n## Other thoughts on dry runs\nYou `export DRY_RUN` during the dry run checks and then run every script and\nlet your scripts be the ones that tell you what it would be doing instead of\ndoing it.\n\nI just find that amount of logic is nice on paper but a huge pain in practice\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cbr\u003e\n\n","slug":"roll-your-own","title":"Reinvent the wheel","section":"Your Env","icon":"info-circle","filePath":"/home/runner/work/dev-prod-2/dev-prod-2/lessons/02-your-env/C-roll-your-own.md","nextSlug":"/dev-prod-2/lessons/your-env/neovim","prevSlug":"/dev-prod-2/lessons/your-env/ansible"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"your-env","slug":"roll-your-own"},"buildId":"9mr2VSKi99OqOhejAzbQC","assetPrefix":"/dev-prod-2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>