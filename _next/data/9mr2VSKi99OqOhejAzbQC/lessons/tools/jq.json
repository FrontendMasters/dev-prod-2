{"pageProps":{"post":{"attributes":{"title":"Tools","description":"jq a hidden treasure"},"html":"<h2>JQ</h2>\n<p>JQ, the hidden treasure in the family of CLI tools.  This one has personaly\nsaved me so much time its hard to qualify just how important it is</p>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n<h2>Lets create a file with the following content</h2>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">3</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">4</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">5</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">69420</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1337</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">111</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">222</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n</code></pre><br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n<h2>prettify logs</h2>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">cat</span> out | jq  <span class=\"hljs-comment\"># jq &#x27;&#x27; out</span>\n</code></pre><br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n<h2>compact json</h2>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">cat</span> out | jq | jq -c\n</code></pre><br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n<h2>check this out</h2>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">3</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">4</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">5</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-number\">69420</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">69</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1337</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">420</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">111</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">222</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre><br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n<h2>lets look at the data</h2>\n<p>Lets sum <em>ALL</em> the foo&#39;s <code>values</code> arrays PER struct</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">3</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">4</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">5</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">69420</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1337</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">111</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">222</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n</code></pre><pre><code class=\"hljs language-bash\">➜  dev-prod-2 git:(main) ✗ <span class=\"hljs-built_in\">cat</span> out | jq <span class=\"hljs-string\">&#x27;select(.type == &quot;foo&quot;) | .values | add&#x27;</span>\n</code></pre><br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n<h2>lets do it again</h2>\n<p>Lets sum <em>ALL</em> the foo&#39;s <code>values</code> arrays and add it as a key to <code>type: foo</code> <code>valueSum</code></p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">3</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">4</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">5</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;foo&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-number\">69420</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">42</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">69</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1337</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">420</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;type&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;bar&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;values&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span><span class=\"hljs-attr\">&quot;a&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">111</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;b&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">222</span><span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">}</span>\n</code></pre><pre><code class=\"hljs language-bash\">➜  dev-prod-2 git:(main) ✗ <span class=\"hljs-built_in\">cat</span> out | jq <span class=\"hljs-string\">&#x27;select(.type == &quot;foo&quot;) | .valueSet = (.values | add)&#x27;</span>\n</code></pre><br>\n<br>\n\n<h2>We can filter out the <code>valueSet</code> now</h2>\n<pre><code class=\"hljs language-bash\">➜  dev-prod-2 git:(main) ✗ <span class=\"hljs-built_in\">cat</span> out | jq <span class=\"hljs-string\">&#x27;select(.type == &quot;foo&quot;) | .valueSet = (.values | add) | select(.valueSet &gt; 20)&#x27;</span>\n</code></pre><br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n","markdown":"\n## JQ\nJQ, the hidden treasure in the family of CLI tools.  This one has personaly\nsaved me so much time its hard to qualify just how important it is\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n## Lets create a file with the following content\n```json\n{\"type\": \"foo\", \"values\": [1, 2, 3, 4, 5]}\n{\"type\": \"foo\", \"values\": [69, 420, 42, 69420]}\n{\"type\": \"bar\", \"values\": {\"a\": 42, \"b\": 69}}\n{\"type\": \"bar\", \"values\": {\"a\": 1337, \"b\": 420}}\n{\"type\": \"bar\", \"values\": {\"a\": 111, \"b\": 222}}\n```\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n## prettify logs\n\n```bash\ncat out | jq  # jq '' out\n```\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n## compact json\n\n```bash\ncat out | jq | jq -c\n```\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n## check this out\n\n```json\n{\n  \"type\": \"foo\",\n  \"values\": [\n    1,\n    2,\n    3,\n    4,\n    5\n  ]\n}\n{\n  \"type\": \"foo\",\n  \"values\": [\n    69,\n    420,\n    42,\n    69420\n  ]\n}\n{\n  \"type\": \"bar\",\n  \"values\": {\n    \"a\": 42,\n    \"b\": 69\n  }\n}\n{\n  \"type\": \"bar\",\n  \"values\": {\n    \"a\": 1337,\n    \"b\": 420\n  }\n}\n{\n  \"type\": \"bar\",\n  \"values\": {\n    \"a\": 111,\n    \"b\": 222\n  }\n}\n```\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n## lets look at the data\nLets sum _ALL_ the foo's `values` arrays PER struct\n\n```json\n{\"type\": \"foo\", \"values\": [1, 2, 3, 4, 5]}\n{\"type\": \"foo\", \"values\": [69, 420, 42, 69420]}\n{\"type\": \"bar\", \"values\": {\"a\": 42, \"b\": 69}}\n{\"type\": \"bar\", \"values\": {\"a\": 1337, \"b\": 420}}\n{\"type\": \"bar\", \"values\": {\"a\": 111, \"b\": 222}}\n```\n\n```bash\n➜  dev-prod-2 git:(main) ✗ cat out | jq 'select(.type == \"foo\") | .values | add'\n```\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n## lets do it again\nLets sum _ALL_ the foo's `values` arrays and add it as a key to `type: foo` `valueSum`\n\n```json\n{\"type\": \"foo\", \"values\": [1, 2, 3, 4, 5]}\n{\"type\": \"foo\", \"values\": [69, 420, 42, 69420]}\n{\"type\": \"bar\", \"values\": {\"a\": 42, \"b\": 69}}\n{\"type\": \"bar\", \"values\": {\"a\": 1337, \"b\": 420}}\n{\"type\": \"bar\", \"values\": {\"a\": 111, \"b\": 222}}\n```\n\n```bash\n➜  dev-prod-2 git:(main) ✗ cat out | jq 'select(.type == \"foo\") | .valueSet = (.values | add)'\n```\n\n<br>\n<br>\n\n## We can filter out the `valueSet` now\n```bash\n➜  dev-prod-2 git:(main) ✗ cat out | jq 'select(.type == \"foo\") | .valueSet = (.values | add) | select(.valueSet > 20)'\n```\n\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n\n","slug":"jq","title":"Tools","section":"Tools","icon":"info-circle","filePath":"/home/runner/work/dev-prod-2/dev-prod-2/lessons/04-tools/B-jq.md","nextSlug":"/dev-prod-2/lessons/tools/unix","prevSlug":"/dev-prod-2/lessons/tools/intro"}},"__N_SSG":true}